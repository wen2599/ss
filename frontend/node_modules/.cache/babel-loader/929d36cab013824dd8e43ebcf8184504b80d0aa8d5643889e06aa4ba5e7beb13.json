{"ast":null,"code":"import React from'react';import Card from'./Card';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const PlayerShowdownHand=_ref=>{let{handData}=_ref;if(!handData)return null;const{scores,isValid,playerId,back,middle,front}=handData;const royalty_details=scores===null||scores===void 0?void 0:scores.royalty_details;return/*#__PURE__*/_jsxs(\"div\",{className:`showdown-player-hand ${!isValid?'scooped':''}`,children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\u73A9\\u5BB6 \",playerId.slice(-4)]}),!isValid?/*#__PURE__*/_jsx(\"p\",{className:\"scooped-message\",children:\"\\u6253\\u67AA! (-6)\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hand-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u5C3E\\u9053:\"}),back.map(c=>/*#__PURE__*/_jsx(Card,{filename:c},c)),(royalty_details===null||royalty_details===void 0?void 0:royalty_details.back)>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"royalty-badge\",children:[\"+\",royalty_details.back]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hand-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u4E2D\\u9053:\"}),middle.map(c=>/*#__PURE__*/_jsx(Card,{filename:c},c)),(royalty_details===null||royalty_details===void 0?void 0:royalty_details.middle)>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"royalty-badge\",children:[\"+\",royalty_details.middle]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hand-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u5934\\u9053:\"}),front.map(c=>/*#__PURE__*/_jsx(Card,{filename:c},c)),(royalty_details===null||royalty_details===void 0?void 0:royalty_details.front)>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"royalty-badge\",children:[\"+\",royalty_details.front]})]})]}),scores?/*#__PURE__*/_jsxs(\"div\",{className:\"score-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u6BD4\\u724C\\u5F97\\u5206: \",scores.comparison_score>0?`+${scores.comparison_score}`:scores.comparison_score]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u7279\\u6B8A\\u724C\\u578B\\u5F97\\u5206: \",scores.total_royalty_payout>0?`+${scores.total_royalty_payout}`:scores.total_royalty_payout]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u672C\\u5C40\\u603B\\u5206: \",scores.final_score>0?`+${scores.final_score}`:scores.final_score]})})]}):/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u672C\\u5C40\\u603B\\u5206: \",handData.roundScore]})]});};function GameTable(_ref2){let{game}=_ref2;if(!game){return/*#__PURE__*/_jsx(\"div\",{className:\"game-table\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u7B49\\u5F85\\u6E38\\u620F\\u5F00\\u59CB...\"})});}const renderContent=()=>{switch(game.state){case'setting_hands':const submittedCount=game.hands.filter(h=>h.isSubmitted).length;const totalPlayers=game.hands.length;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u7406\\u724C\\u9636\\u6BB5\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BF7\\u5C06\\u4F60\\u768413\\u5F20\\u724C\\u5206\\u7EC4\\u6210\\u5934\\u3001\\u4E2D\\u3001\\u5C3E\\u4E09\\u9053\\u3002\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BF7\\u786E\\u4FDD\\u5C3E\\u9053\\u724C\\u578B\\u6700\\u5927\\uFF0C\\u5934\\u9053\\u724C\\u578B\\u6700\\u5C0F\\u3002\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[submittedCount,\" / \",totalPlayers,\" \\u4F4D\\u73A9\\u5BB6\\u5DF2\\u51C6\\u5907\"]})]});case'showdown':case'finished':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u6BD4\\u724C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"showdown-area\",children:game.hands.map(handData=>/*#__PURE__*/_jsx(PlayerShowdownHand,{handData:handData},handData.playerId))})]});default:return/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u6E38\\u620F\\u72B6\\u6001: \",game.state]});}};return/*#__PURE__*/_jsx(\"div\",{className:\"game-table\",children:renderContent()});}export default GameTable;","map":{"version":3,"names":["React","Card","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","PlayerShowdownHand","_ref","handData","scores","isValid","playerId","back","middle","front","royalty_details","className","children","slice","map","c","filename","comparison_score","total_royalty_payout","final_score","roundScore","GameTable","_ref2","game","renderContent","state","submittedCount","hands","filter","h","isSubmitted","length","totalPlayers"],"sources":["/app/frontend/src/components/GameTable.js"],"sourcesContent":["import React from 'react';\nimport Card from './Card';\n\nconst PlayerShowdownHand = ({ handData }) => {\n  if (!handData) return null;\n\n  const { scores, isValid, playerId, back, middle, front } = handData;\n  const royalty_details = scores?.royalty_details;\n\n  return (\n    <div className={`showdown-player-hand ${!isValid ? 'scooped' : ''}`}>\n      <h4>玩家 {playerId.slice(-4)}</h4>\n      {!isValid ? (\n        <p className=\"scooped-message\">打枪! (-6)</p>\n      ) : (\n        <>\n          <div className=\"hand-row\">\n            <span>尾道:</span>\n            {back.map(c => <Card key={c} filename={c} />)}\n            {royalty_details?.back > 0 && <span className=\"royalty-badge\">+{royalty_details.back}</span>}\n          </div>\n          <div className=\"hand-row\">\n            <span>中道:</span>\n            {middle.map(c => <Card key={c} filename={c} />)}\n            {royalty_details?.middle > 0 && <span className=\"royalty-badge\">+{royalty_details.middle}</span>}\n          </div>\n          <div className=\"hand-row\">\n            <span>头道:</span>\n            {front.map(c => <Card key={c} filename={c} />)}\n            {royalty_details?.front > 0 && <span className=\"royalty-badge\">+{royalty_details.front}</span>}\n          </div>\n        </>\n      )}\n      {scores ? (\n        <div className=\"score-details\">\n            <p>比牌得分: {scores.comparison_score > 0 ? `+${scores.comparison_score}` : scores.comparison_score}</p>\n            <p>特殊牌型得分: {scores.total_royalty_payout > 0 ? `+${scores.total_royalty_payout}` : scores.total_royalty_payout}</p>\n            <p><strong>本局总分: {scores.final_score > 0 ? `+${scores.final_score}` : scores.final_score}</strong></p>\n        </div>\n      ) : (\n          <p>本局总分: {handData.roundScore}</p>\n      )}\n    </div>\n  );\n};\n\nfunction GameTable({ game }) {\n  if (!game) {\n    return (\n      <div className=\"game-table\">\n        <p>等待游戏开始...</p>\n      </div>\n    );\n  }\n\n  const renderContent = () => {\n    switch (game.state) {\n      case 'setting_hands':\n        const submittedCount = game.hands.filter(h => h.isSubmitted).length;\n        const totalPlayers = game.hands.length;\n        return (\n          <div>\n            <h2>理牌阶段</h2>\n            <p>请将你的13张牌分组成头、中、尾三道。</p>\n            <p>请确保尾道牌型最大，头道牌型最小。</p>\n            <h3>{submittedCount} / {totalPlayers} 位玩家已准备</h3>\n          </div>\n        );\n\n      case 'showdown':\n      case 'finished':\n        return (\n          <div>\n            <h2>比牌</h2>\n            <div className=\"showdown-area\">\n              {game.hands.map(handData => (\n                <PlayerShowdownHand key={handData.playerId} handData={handData} />\n              ))}\n            </div>\n          </div>\n        );\n\n      default:\n        return <p>游戏状态: {game.state}</p>;\n    }\n  };\n\n  return (\n    <div className=\"game-table\">\n      {renderContent()}\n    </div>\n  );\n}\n\nexport default GameTable;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}