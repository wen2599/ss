<IfModule mod_security2.c>
    <Files "index.php">
        SecRuleEngine Off
    </Files>
    <Files "webhook_test.php">
        SecRuleEngine Off
    </Files>
</IfModule>

<IfModule mod_rewrite.c>
    RewriteEngine On

    # Rule to pass the Telegram secret token header
    RewriteRule .* - [E=HTTP_X_TELEGRAM_BOT_API_SECRET_TOKEN:%{HTTP:X-Telegram-Bot-Api-Secret-Token}]

    # Front Controller Pattern:
    # If the requested file or directory does not exist,
    # redirect all requests to index.php.
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php [L,QSA]
</IfModule>
